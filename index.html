<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Up To Drive</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://accounts.google.com/gsi/client"></script>

        <!-- import the webpage's stylesheet -->
        <!-- <link rel="stylesheet" href="/style.css" /> -->
        <link rel="stylesheet" href="/style/output.css" />

        <!-- import the webpage's javascript file -->
        <!-- <script src="/js/share.js" defer></script> -->
        <script defer src="/js/common.js" defer></script>
        <link rel="manifest" href="/manifest.json" />
        <meta name="theme-color" content="#ff0000" />
    </head>
    <body class="bg-slate-100 h-svh flex flex-col items-center p-5">
        <div
            class="rounded-md shadow bg-white min-w-[400px] max-w-2xl p-5 flex flex-col gap-10"
        >
            <div class="flex gap-2 items-center justify-center">
                <img
                    src="/images/icons/icon-512x512.svg"
                    width="60px"
                    height="60px"
                    alt="Up To Drive"
                />
                <h1 class="text-3xl font-bold">Up To Drive</h1>
            </div>
            <p class="text-xl text-slate-600">
                Just a humble app to make evidence upload easier. ðŸ™ƒ
            </p>
            <div>
                <label for="file-input" class="sr-only">Choose file</label>
                <input
                    type="file"
                    name="file-input"
                    id="fileInput"
                    class="block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none file:bg-gray-50 file:border-0 file:me-4 file:py-3 file:px-4"
                />
            </div>

            <div>
                <button
                    id="btnSend"
                    class="bg-blue-500 py-2 px-4 text-white font-bold"
                    type="submit"
                >
                    Send
                </button>
            </div>
        </div>
        <script async>
            const fileInput = document.querySelector("#fileInput");
            const btnSend = document.querySelector("#btnSend");

            btnSend.addEventListener("click", async () => {
                console.log("FILE", fileInput.files[0]);

                const formData = new FormData();
                formData.append("file", fileInput.files[0]);
                formData.append("customName", "custon-name-alan");

                const options = {
                    method: "POST",
                    body: formData,
                };

                fetch("https://uptodrive-backend.onrender.com/upload", options)
                    .then((response) => response.json())
                    .then((response) => {
                        console.log(response);
                    });
            });

            // btnSend.addEventListener("click", async () => {
            //     const file = fileInput.files[0];
            //     const fileReader = new FileReader();
            //     fileReader.onload = function (e) {
            //         const blob = dataURLtoBlob(fileReader.result);
            //         console.log("FILEEEE", blob);
            //     };

            //     return;
            //     // Converte a data URL para um blob
            //     const blob = await fileInput.files[0].blob();

            //     const formData = new FormData();
            //     formData.append("image", blob, "image.png");

            //     // Envia o arquivo para o backend (Node.js)
            //     fetch("http://localhost:4000/uploads", {
            //         method: "POST",
            //         body: formData,
            //     })
            //         .then((response) => response.text())
            //         .then((result) => {
            //             alert(result);
            //         })
            //         .catch((error) => {
            //             console.error("Erro ao fazer upload:", error);
            //             alert("Erro ao enviar o arquivo.");
            //         });

            //     // fetch("http://localhost:4000/uploads", { method: "POST" });
            // });
        </script>
    </body>
</html>
